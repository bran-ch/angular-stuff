phases:
- phase: PreBuild
  steps:
  - task: Npm@1
    displayName: Npm Install
    inputs:
      command: install
      workingDir: ./
  - task: Npm@1
    displayName: Ng Lint
    inputs:
      command: custom
      customCommand: run ng lint
      workingDir: ./
- phase: Build
  dependsOn: PreBuild
  steps:
  - task: Npm@1
    displayName: Npm Install Angular Cli
    inputs:
      command: custom
      customCommand: "install -g @angular/cli"
  - task: Npm@1
    displayName: Npm Install Production
    inputs:
      command: custom
      customCommand: "install --only=production"
  - task: Npm@1
    displayName: Ng Build Production
    inputs:
      command: custom
      customCommand: "run ng build --prod"
  - task: Npm@1
    displayName: Ng Build Production
    inputs:
      command: custom
      customCommand: "run ng build --prod"
  - task: ArchiveFiles@2
    displayName: Package Artifacts
    inputs:
      rootFolderOrFile: dist
  - task: PublishBuildArtifacts@1
    displayName: Publish Artifacts
    inputs:
      rootFolderOrFile: $(System.DefaultWorkingDirectory)/dist
      artifactName: drop
      artifactType: "Visual Studio Team Services/TFS"